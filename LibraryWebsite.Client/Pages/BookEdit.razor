@page "/book-edit"
@inject HttpClient Http
@inject NavigationManager NavigationManager

<h1>Add book</h1>

<div class="form-group">
    <label for="titleInput">Title</label>
    <input type="text" class="form-control" id="titleInput" @bind-value="@book.Title">

    <label for="isbn13Input">Isbn13</label>
    <input type="text" class="form-control" id="isbn13Input" @bind-value="@book.Isbn13">

    <label for="authorInput">Author</label>
    <input type="text" class="form-control" id="authorInput" @bind-value="@book.Author">

    <label for="descriptionInput">Description</label>
    <input type="text" class="form-control" id="descriptionInput" @bind-value="@book.Description">
</div>

<button id="book-save" class="btn btn-primary" @onclick="Save">Save</button>
<button id="book-cancel" class="btn btn-primary" @onclick="Cancel">Cancel</button>

@code {

    BookDto book = new BookDto();

    private async Task Save()
    {
        var addedBookGuid = await Http.PostJsonAsync<Guid>("api/book", book);

        NavigationManager.NavigateTo($"/book-list?bookChanged={addedBookGuid}");
    }

    private void Cancel()
    {
        NavigationManager.NavigateTo("/book-list");
    }

}
